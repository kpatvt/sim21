>> # C3 splitter test (from old Hysim manual)
>> units Field
>> $thermo = Sim21Thermo.Peng-Robinson
pkgName: Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE PROPYLENE
PROPANE PROPYLENE 
>> 
>> c3splitter = Tower.Tower()
>> c3splitter.Stage_0 + 183  # 185 stages`
>> 
>> cd c3splitter.Stage_0
/c3splitter.Stage_0
>> 
>> l = Tower.LiquidDraw()
>> l.Port.P = 280
>> l.Port.Fraction.PROPANE = 0.004
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = 114.8
>> 
>> # reflux = Tower.StageSpecification('Reflux')
>> # reflux.Value = 16.4
>> 
>> cd ../Stage_137
/c3splitter.Stage_137
>> f = Tower.Feed()
>> 
>> cd ../Stage_184
/c3splitter.Stage_184
>> l = Tower.LiquidDraw()
>> l.Port.P = 280
>> 
>> reb = Tower.EnergyFeed(1)
>> estT = Tower.Estimate('T')
>> estT.Value = 129.2
>> l.Port.Fraction.PROPYLENE = 0.015
>> 
>> cd /
/
>> 
>> feed = Stream.Stream_Material()
>> cd feed.In
/feed.In
>> P = 280
>> VapFrac = 1
>> MoleFlow = 1322.76
>> Fraction = 0.4 0.6
>> cd /c3splitter
/c3splitter
>> /feed.Out -> Stage_137.f.Port
>> /feed.Out
Port: /feed.Out + sim21.solver.Ports.Port_Material
Connected to: /c3splitter.Feed_137_f
VapFrac            = 1.0 = 
T                  = 122.63687536222754 = F
P                  = 280.0 = psia
MoleFlow           = 1322.76 = lbmole/h
MassFlow           = 56728.00705392 = lb/h
VolumeFlow         = 5.79889875023107 = ft3/s
StdLiqVolumeFlow   = 0.4702290333482771 = ft3/s
H                  = -13013.272257536355 = Btu/lbmol
Energy             = -17210541.38304338 = Btu/hr
MolecularWeight    = 42.886092000000005 = 
ZFactor            = 0.7071421434837692 = 
PROPANE            = 0.4 = 
PROPYLENE          = 0.6 = 

>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.l.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_184.l.Port
>> 
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /c3splitter
Calculating disturbance 10 of 185 in jacobian of /c3splitter
Calculating disturbance 20 of 185 in jacobian of /c3splitter
Calculating disturbance 30 of 185 in jacobian of /c3splitter
Calculating disturbance 40 of 185 in jacobian of /c3splitter
Calculating disturbance 50 of 185 in jacobian of /c3splitter
Calculating disturbance 60 of 185 in jacobian of /c3splitter
Calculating disturbance 70 of 185 in jacobian of /c3splitter
Calculating disturbance 80 of 185 in jacobian of /c3splitter
Calculating disturbance 90 of 185 in jacobian of /c3splitter
Calculating disturbance 100 of 185 in jacobian of /c3splitter
Calculating disturbance 110 of 185 in jacobian of /c3splitter
Calculating disturbance 120 of 185 in jacobian of /c3splitter
Calculating disturbance 130 of 185 in jacobian of /c3splitter
Calculating disturbance 140 of 185 in jacobian of /c3splitter
Calculating disturbance 150 of 185 in jacobian of /c3splitter
Calculating disturbance 160 of 185 in jacobian of /c3splitter
Calculating disturbance 170 of 185 in jacobian of /c3splitter
Calculating disturbance 180 of 185 in jacobian of /c3splitter
/c3splitter Inner Error 0.528820
/c3splitter Inner Error 0.077655
Step size too small - Exiting inner loop
/c3splitter Iteration 1 Outer Error 0.000882
Calculating Jacobian for /c3splitter
Calculating disturbance 10 of 185 in jacobian of /c3splitter
Calculating disturbance 20 of 185 in jacobian of /c3splitter
Calculating disturbance 30 of 185 in jacobian of /c3splitter
Calculating disturbance 40 of 185 in jacobian of /c3splitter
Calculating disturbance 50 of 185 in jacobian of /c3splitter
Calculating disturbance 60 of 185 in jacobian of /c3splitter
Calculating disturbance 70 of 185 in jacobian of /c3splitter
Calculating disturbance 80 of 185 in jacobian of /c3splitter
Calculating disturbance 90 of 185 in jacobian of /c3splitter
Calculating disturbance 100 of 185 in jacobian of /c3splitter
Calculating disturbance 110 of 185 in jacobian of /c3splitter
Calculating disturbance 120 of 185 in jacobian of /c3splitter
Calculating disturbance 130 of 185 in jacobian of /c3splitter
Calculating disturbance 140 of 185 in jacobian of /c3splitter
Calculating disturbance 150 of 185 in jacobian of /c3splitter
Calculating disturbance 160 of 185 in jacobian of /c3splitter
Calculating disturbance 170 of 185 in jacobian of /c3splitter
Calculating disturbance 180 of 185 in jacobian of /c3splitter
/c3splitter Inner Error 0.124389
/c3splitter Inner Error 0.122265
/c3splitter Inner Error 0.105827
/c3splitter Inner Error 0.048325
/c3splitter Inner Error 0.043775
/c3splitter Inner Error 0.039478
/c3splitter Inner Error 0.021919
/c3splitter Inner Error 0.017373
/c3splitter Inner Error 0.010566
/c3splitter Inner Error 0.007237
/c3splitter Inner Error 0.004649
/c3splitter Inner Error 0.003308
/c3splitter Inner Error 0.002738
/c3splitter Inner Error 0.001966
/c3splitter Inner Error 0.000812
/c3splitter Inner Error 0.000702
/c3splitter Inner Error 0.000617
/c3splitter Inner Error 0.000512
/c3splitter Inner Error 0.000471
/c3splitter Inner Error 0.000387
/c3splitter Iteration 2 Outer Error 0.000444
Calculating Jacobian for /c3splitter
Calculating disturbance 10 of 185 in jacobian of /c3splitter
Calculating disturbance 20 of 185 in jacobian of /c3splitter
Calculating disturbance 30 of 185 in jacobian of /c3splitter
Calculating disturbance 40 of 185 in jacobian of /c3splitter
Calculating disturbance 50 of 185 in jacobian of /c3splitter
Calculating disturbance 60 of 185 in jacobian of /c3splitter
Calculating disturbance 70 of 185 in jacobian of /c3splitter
Calculating disturbance 80 of 185 in jacobian of /c3splitter
Calculating disturbance 90 of 185 in jacobian of /c3splitter
Calculating disturbance 100 of 185 in jacobian of /c3splitter
Calculating disturbance 110 of 185 in jacobian of /c3splitter
Calculating disturbance 120 of 185 in jacobian of /c3splitter
Calculating disturbance 130 of 185 in jacobian of /c3splitter
Calculating disturbance 140 of 185 in jacobian of /c3splitter
Calculating disturbance 150 of 185 in jacobian of /c3splitter
Calculating disturbance 160 of 185 in jacobian of /c3splitter
Calculating disturbance 170 of 185 in jacobian of /c3splitter
Calculating disturbance 180 of 185 in jacobian of /c3splitter
/c3splitter Inner Error 0.038403
/c3splitter Inner Error 0.034888
/c3splitter Inner Error 0.028131
/c3splitter Inner Error 0.027263
/c3splitter Inner Error 0.024674
/c3splitter Inner Error 0.022839
/c3splitter Inner Error 0.015679
/c3splitter Inner Error 0.010130
/c3splitter Inner Error 0.008359
/c3splitter Inner Error 0.007878
/c3splitter Inner Error 0.007564
/c3splitter Inner Error 0.007103
/c3splitter Inner Error 0.006552
/c3splitter Inner Error 0.006347
/c3splitter Inner Error 0.005667
/c3splitter Inner Error 0.004862
/c3splitter Inner Error 0.004464
/c3splitter Inner Error 0.004207
/c3splitter Inner Error 0.004194
/c3splitter Inner Error 0.003831
/c3splitter Iteration 3 Outer Error 0.000029
Calculating Jacobian for /c3splitter
Calculating disturbance 10 of 185 in jacobian of /c3splitter
Calculating disturbance 20 of 185 in jacobian of /c3splitter
Calculating disturbance 30 of 185 in jacobian of /c3splitter
Calculating disturbance 40 of 185 in jacobian of /c3splitter
Calculating disturbance 50 of 185 in jacobian of /c3splitter
Calculating disturbance 60 of 185 in jacobian of /c3splitter
Calculating disturbance 70 of 185 in jacobian of /c3splitter
Calculating disturbance 80 of 185 in jacobian of /c3splitter
Calculating disturbance 90 of 185 in jacobian of /c3splitter
Calculating disturbance 100 of 185 in jacobian of /c3splitter
Calculating disturbance 110 of 185 in jacobian of /c3splitter
Calculating disturbance 120 of 185 in jacobian of /c3splitter
Calculating disturbance 130 of 185 in jacobian of /c3splitter
Calculating disturbance 140 of 185 in jacobian of /c3splitter
Calculating disturbance 150 of 185 in jacobian of /c3splitter
Calculating disturbance 160 of 185 in jacobian of /c3splitter
Calculating disturbance 170 of 185 in jacobian of /c3splitter
Calculating disturbance 180 of 185 in jacobian of /c3splitter
/c3splitter Inner Error 0.003106
/c3splitter Inner Error 0.001510
/c3splitter Inner Error 0.000907
/c3splitter Inner Error 0.000612
/c3splitter Inner Error 0.000538
/c3splitter Inner Error 0.000297
/c3splitter Inner Error 0.000208
/c3splitter Inner Error 0.000068
/c3splitter Inner Error 0.000055
/c3splitter Inner Error 0.000016
/c3splitter Inner Error 0.000012
Inner loop is not changing significantly - exiting
/c3splitter Iteration 4 Outer Error 0.000007
Calculating Jacobian for /c3splitter
Calculating disturbance 10 of 185 in jacobian of /c3splitter
Calculating disturbance 20 of 185 in jacobian of /c3splitter
Calculating disturbance 30 of 185 in jacobian of /c3splitter
Calculating disturbance 40 of 185 in jacobian of /c3splitter
Calculating disturbance 50 of 185 in jacobian of /c3splitter
Calculating disturbance 60 of 185 in jacobian of /c3splitter
Calculating disturbance 70 of 185 in jacobian of /c3splitter
Calculating disturbance 80 of 185 in jacobian of /c3splitter
Calculating disturbance 90 of 185 in jacobian of /c3splitter
Calculating disturbance 100 of 185 in jacobian of /c3splitter
Calculating disturbance 110 of 185 in jacobian of /c3splitter
Calculating disturbance 120 of 185 in jacobian of /c3splitter
Calculating disturbance 130 of 185 in jacobian of /c3splitter
Calculating disturbance 140 of 185 in jacobian of /c3splitter
Calculating disturbance 150 of 185 in jacobian of /c3splitter
Calculating disturbance 160 of 185 in jacobian of /c3splitter
Calculating disturbance 170 of 185 in jacobian of /c3splitter
Calculating disturbance 180 of 185 in jacobian of /c3splitter
/c3splitter Inner Error 0.002008
/c3splitter Inner Error 0.000559
/c3splitter Inner Error 0.000110
/c3splitter Inner Error 0.000047
/c3splitter Inner Error 0.000017
/c3splitter Inner Error 0.000015
Inner loop is not changing significantly - exiting
/c3splitter Iteration 5 Outer Error 0.000001
Calculating Jacobian for /c3splitter
Calculating disturbance 10 of 185 in jacobian of /c3splitter
Calculating disturbance 20 of 185 in jacobian of /c3splitter
Calculating disturbance 30 of 185 in jacobian of /c3splitter
Calculating disturbance 40 of 185 in jacobian of /c3splitter
Calculating disturbance 50 of 185 in jacobian of /c3splitter
Calculating disturbance 60 of 185 in jacobian of /c3splitter
Calculating disturbance 70 of 185 in jacobian of /c3splitter
Calculating disturbance 80 of 185 in jacobian of /c3splitter
Calculating disturbance 90 of 185 in jacobian of /c3splitter
Calculating disturbance 100 of 185 in jacobian of /c3splitter
Calculating disturbance 110 of 185 in jacobian of /c3splitter
Calculating disturbance 120 of 185 in jacobian of /c3splitter
Calculating disturbance 130 of 185 in jacobian of /c3splitter
Calculating disturbance 140 of 185 in jacobian of /c3splitter
Calculating disturbance 150 of 185 in jacobian of /c3splitter
Calculating disturbance 160 of 185 in jacobian of /c3splitter
Calculating disturbance 170 of 185 in jacobian of /c3splitter
Calculating disturbance 180 of 185 in jacobian of /c3splitter
/c3splitter Inner Error 0.000002
Inner loop converged
>> 
>> /overhead.Out
Port: /overhead.Out + sim21.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 116.33121191968642 = F
P                  = 280.0 = psia
MoleFlow           = 788.802078947823 = lbmole/h
MassFlow           = 33198.94691689868 = lb/h
VolumeFlow         = 0.31552213983179533 = ft3/s
StdLiqVolumeFlow   = 0.2920470494535324 = ft3/s
H                  = 2980.1156427037026 = Btu/lbmol
Energy             = 2350326.114843753 = Btu/hr
MolecularWeight    = 42.087803522504025 = 
ZFactor            = 0.06522777451412155 = 
PROPANE            = 0.004 = 
PROPYLENE          = 0.9959996894623987 = 

>> /bottoms.Out
Port: /bottoms.Out + sim21.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 131.40816055333144 = F
P                  = 280.0 = psia
MoleFlow           = 533.9579210521802 = lbmole/h
MassFlow           = 23529.059656132114 = lb/h
VolumeFlow         = 0.23955000484351296 = ft3/s
StdLiqVolumeFlow   = 0.17818199278039923 = ft3/s
H                  = -49383.63399102167 = Btu/lbmol
Energy             = -26364348.339432422 = Btu/hr
MolecularWeight    = 44.065381799688254 = 
ZFactor            = 0.07129160677095836 = 
PROPANE            = 0.9849999896904093 = 
PROPYLENE          = 0.015 = 

