>> # Luyben problem - Get initial estimates with reflux ratios to eventually target composition specs
>> 
>> units SI
>> 
>> # set up thermo
>> $thermo = Sim21Thermo.Peng-Robinson
pkgName: Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + ETHANE PROPANE ISOBUTANE N-BUTANE ISOPENTANE N-PENTANE
ETHANE PROPANE ISOBUTANE N-BUTANE ISOPENTANE N-PENTANE 
>> 
>> nat_gas_feed = Stream.Stream_Material()
>> nat_gas_feed.In.T = 378 K
>> nat_gas_feed.In.P = 1763.055
>> nat_gas_feed.In.MoleFlow = 12033
>> nat_gas_feed.In.Fraction = .0005 0.332 0.3583 0.1543 0.103 0.0518
>> nat_gas_feed.Out
Port: /nat_gas_feed.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 104.85000000000002 = C
P                  = 1763.055 = kPa
MoleFlow           = 12033.0 = kgmole/h
MassFlow           = 669304.5012285148 = kg/h
VolumeFlow         = 15801.8948894737 = m3/hr
StdLiqVolumeFlow   = 1152.1539495139514 = m3/hr
H                  = -120320.73068312123 = kJ/kmol
Energy             = -402172042.30833274 = W
MolecularWeight    = 55.62241346534653 = 
ZFactor            = 0.7366736361555987 = 
ETHANE             = 0.0005000500050005 = 
PROPANE            = 0.33203320332033204 = 
ISOBUTANE          = 0.35833583358335835 = 
N-BUTANE           = 0.1543154315431543 = 
ISOPENTANE         = 0.103010301030103 = 
N-PENTANE          = 0.0518051805180518 = 

>> 
>> 
>> 
>> col1 = Tower.Tower()
>> col1.Stage_0 + 48  # twenty two stages`
>> 
>> cd col1.Stage_24
/col1.Stage_24
>> f = Tower.Feed()
>> /nat_gas_feed.Out -> f.Port
>> 
>> cd ../Stage_0
/col1.Stage_0
>> l = Tower.LiquidDraw()
>> l.Port.P = 1722.525
>> l.Port.MoleFlow = 3993.34
>> # l.Port.Fraction.ISOBUTANE = 0.001
>> 
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> reflux = Tower.StageSpecification('Reflux')
>> reflux.Value = 3.0
>> 
>> # estT = Tower.Estimate('T')
>> # estT.Value = 322
>> 
>> cd ../Stage_49
/col1.Stage_49
>> l = Tower.LiquidDraw()
>> l.Port.P = 1773.1875
>> #l.Port.MoleFlow = 142.53
>> #l.Port.Fraction.PROPANE = 0.001
>> 
>> reb = Tower.EnergyFeed(1)
>> 
>> # estT = Tower.Estimate('T')
>> # estT.Value = 322
>> 
>> cd ..
/col1
>> 
>> # DampingFactor = 0.9
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.004487
/col1 Inner Error 0.001867
/col1 Inner Error 0.000161
/col1 Inner Error 0.000033
/col1 Inner Error 0.000008
Inner loop converged
/col1 Iteration 1 Outer Error 1.388487
/col1 Inner Error 0.014388
/col1 Inner Error 0.002385
/col1 Inner Error 0.001940
/col1 Inner Error 0.000393
/col1 Inner Error 0.000044
/col1 Inner Error 0.000019
/col1 Inner Error 0.000002
Inner loop converged
/col1 Iteration 2 Outer Error 0.312871
/col1 Inner Error 0.016471
/col1 Inner Error 0.009113
/col1 Inner Error 0.001201
/col1 Inner Error 0.000563
/col1 Inner Error 0.000062
/col1 Inner Error 0.000016
/col1 Inner Error 0.000010
Inner loop converged
/col1 Iteration 3 Outer Error 0.006591
/col1 Inner Error 0.002157
/col1 Inner Error 0.001025
/col1 Inner Error 0.000166
/col1 Inner Error 0.000053
/col1 Inner Error 0.000037
/col1 Inner Error 0.000020
/col1 Inner Error 0.000009
Inner loop converged
/col1 Iteration 4 Outer Error 0.000072
/col1 Inner Error 0.000227
/col1 Inner Error 0.000062
/col1 Inner Error 0.000047
/col1 Inner Error 0.000044
Inner loop is not changing significantly - exiting
/col1 Iteration 5 Outer Error 0.000002
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.000000
Inner loop converged
>> 
>> # First pass, solve with reflux ratio of 3
>> 
>> /overhead_col1 = Stream.Stream_Material()
>> /overhead_col1.In -> Stage_0.l.Port
>> 
>> /bottoms_col1 = Stream.Stream_Material()
>> /bottoms_col1.In -> Stage_49.l.Port
>> 
>> cd /
/
>> 
>> overhead_col1.Out
Port: /overhead_col1.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 3.135089522684482e-06 = 
T                  = 62.211857859053794 = C
P                  = 1722.525 = kPa
MoleFlow           = 3993.34 = kgmole/h
MassFlow           = 194989.87527464807 = kg/h
VolumeFlow         = 425.8149867188198 = m3/hr
StdLiqVolumeFlow   = 338.22170247286294 = m3/hr
H                  = -126872.48323777138 = kJ/kmol
Energy             = -140734711.72575608 = W
MolecularWeight    = 48.828768579597515 = 
ZFactor            = 0.06587222544114255 = 
ETHANE             = 0.0013498844300442964 = 
PROPANE            = 0.6598590534871285 = 
ISOBUTANE          = 0.3063843605051698 = 
N-BUTANE           = 0.03240648449427104 = 
ISOPENTANE         = 2.1112365783200878e-07 = 
N-PENTANE          = 5.95972872326175e-09 = 

>> bottoms_col1.Out
Port: /bottoms_col1.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 2.707048372181556e-06 = 
T                  = 97.38003483587784 = C
P                  = 1773.1875 = kPa
MoleFlow           = 8039.659834285234 = kgmole/h
MassFlow           = 474314.6178622186 = kg/h
VolumeFlow         = 1033.5844446602227 = m3/hr
StdLiqVolumeFlow   = 813.9322330056367 = m3/hr
H                  = -140957.32838708814 = kJ/kmol
Energy             = -314791380.93939614 = W
MolecularWeight    = 58.99685156323379 = 
ZFactor            = 0.07399550690591913 = 
ETHANE             = 7.793289884358207e-05 = 
PROPANE            = 0.16920042658419537 = 
ISOBUTANE          = 0.384140396013532 = 
N-BUTANE           = 0.214868229154595 = 
ISOPENTANE         = 0.1541759396237996 = 
N-PENTANE          = 0.0775370757250345 = 

>> 
>> col1.Stage_0.reflux =
>> col1.Stage_0.reflux = Tower.StageSpecification('Reflux')
>> 
>> # First pass, solve with reflux ratio of 3
>> col1.Stage_0.reflux.Value = 10.0
/col1 Inner Error 6.461846
/col1 Inner Error 5.500993
/col1 Inner Error 2.940514
/col1 Inner Error 0.082484
/col1 Inner Error 0.082474
Inner loop is not changing significantly - exiting
/col1 Iteration 1 Outer Error 0.022683
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.021889
/col1 Inner Error 0.015887
/col1 Inner Error 0.014953
/col1 Inner Error 0.014329
/col1 Inner Error 0.005664
/col1 Inner Error 0.004484
/col1 Inner Error 0.002950
/col1 Inner Error 0.001171
/col1 Inner Error 0.000454
/col1 Inner Error 0.000156
/col1 Inner Error 0.000043
/col1 Inner Error 0.000016
/col1 Inner Error 0.000005
Inner loop converged
/col1 Iteration 2 Outer Error 0.041944
/col1 Inner Error 0.042931
/col1 Inner Error 0.016424
/col1 Inner Error 0.007203
/col1 Inner Error 0.004579
/col1 Inner Error 0.002510
/col1 Inner Error 0.001004
/col1 Inner Error 0.000997
Inner loop is not changing significantly - exiting
/col1 Iteration 3 Outer Error 0.011947
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.023770
Step size too small - Exiting inner loop
/col1 Iteration 4 Outer Error 0.000486
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.026005
/col1 Inner Error 0.025998
Inner loop is not changing significantly - exiting
/col1 Iteration 5 Outer Error 0.000025
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.026088
/col1 Inner Error 0.026074
/col1 Inner Error 0.026010
/col1 Inner Error 0.025948
/col1 Inner Error 0.025783
/col1 Inner Error 0.025116
/col1 Inner Error 0.021461
/col1 Inner Error 0.003392
/col1 Inner Error 0.002112
/col1 Inner Error 0.000452
/col1 Inner Error 0.000257
/col1 Inner Error 0.000029
/col1 Inner Error 0.000005
Inner loop converged
>> 
>> 
>> col1.TryToSolve = 0
>> col1.Stage_0.reflux =
>> col1.Stage_0.l.Port.MoleFlow =
>> 
>> col1.Stage_0.l.Port.Fraction.ISOBUTANE = 0.0001
>> col1.Stage_49.l.Port.Fraction.PROPANE = 0.0001
>> 
>> col1.TryToSolve = 1
/col1 Inner Error 0.000764
/col1 Inner Error 0.000513
/col1 Inner Error 0.000513
Inner loop is not changing significantly - exiting
/col1 Iteration 1 Outer Error 0.013585
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.010646
Inner loop is not changing significantly - exiting
/col1 Iteration 2 Outer Error 0.010914
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.032478
/col1 Inner Error 0.032343
/col1 Inner Error 0.032152
/col1 Inner Error 0.019838
/col1 Inner Error 0.010341
/col1 Inner Error 0.007854
/col1 Inner Error 0.005140
/col1 Inner Error 0.004464
/col1 Inner Error 0.003659
/col1 Inner Error 0.003085
/col1 Inner Error 0.002711
/col1 Inner Error 0.001873
/col1 Inner Error 0.000908
/col1 Inner Error 0.000512
/col1 Inner Error 0.000494
/col1 Inner Error 0.000487
Inner loop is not changing significantly - exiting
/col1 Iteration 3 Outer Error 0.032687
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.009758
/col1 Inner Error 0.005510
/col1 Inner Error 0.003320
/col1 Inner Error 0.002895
/col1 Inner Error 0.002796
/col1 Inner Error 0.001163
/col1 Inner Error 0.001129
/col1 Inner Error 0.000985
/col1 Inner Error 0.000945
/col1 Inner Error 0.000514
Step size too small - Exiting inner loop
/col1 Iteration 4 Outer Error 0.008099
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.002470
/col1 Inner Error 0.001876
/col1 Inner Error 0.001518
/col1 Inner Error 0.001404
/col1 Inner Error 0.000665
/col1 Inner Error 0.000167
/col1 Inner Error 0.000141
/col1 Inner Error 0.000021
/col1 Inner Error 0.000003
Inner loop converged
/col1 Iteration 5 Outer Error 0.006374
/col1 Inner Error 0.002807
/col1 Inner Error 0.002541
/col1 Inner Error 0.002032
/col1 Inner Error 0.000359
/col1 Inner Error 0.000140
Step size too small - Exiting inner loop
/col1 Iteration 6 Outer Error 0.000119
Calculating Jacobian for /col1
Calculating disturbance 10 of 50 in jacobian of /col1
Calculating disturbance 20 of 50 in jacobian of /col1
Calculating disturbance 30 of 50 in jacobian of /col1
Calculating disturbance 40 of 50 in jacobian of /col1
Calculating disturbance 50 of 50 in jacobian of /col1
/col1 Inner Error 0.000492
/col1 Inner Error 0.000087
/col1 Inner Error 0.000003
Inner loop converged
/col1 Iteration 7 Outer Error 0.000276
/col1 Inner Error 0.000196
/col1 Inner Error 0.000035
/col1 Inner Error 0.000001
Inner loop converged
/col1 Iteration 8 Outer Error 0.000015
/col1 Inner Error 0.000009
Inner loop converged
>> 
>> overhead_col1.Out
Port: /overhead_col1.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 49.93480218930887 = C
P                  = 1722.525 = kPa
MoleFlow           = 4000.971022859548 = kgmole/h
MassFlow           = 176346.52334838588 = kg/h
VolumeFlow         = 390.24655971676845 = m3/hr
StdLiqVolumeFlow   = 299.39171112754286 = m3/hr
H                  = -117464.16254133287 = kJ/kmol
Energy             = -130547419.59787133 = W
MolecularWeight    = 44.07593021887772 = 
ZFactor            = 0.06254440948439534 = 
ETHANE             = 0.0015039103446989493 = 
PROPANE            = 0.9983957159468697 = 
ISOBUTANE          = 0.0001 = 
N-BUTANE           = 2.0344249971605888e-07 = 
ISOPENTANE         = 6.698717894616763e-09 = 
N-PENTANE          = 6.2473398028172154e-09 = 

>> bottoms_col1.Out
Port: /bottoms_col1.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 7.443108407151346e-09 = 
T                  = 107.5633578922442 = C
P                  = 1773.1875 = kPa
MoleFlow           = 8032.028977140501 = kgmole/h
MassFlow           = 492957.96910470683 = kg/h
VolumeFlow         = 1102.3528509937282 = m3/hr
StdLiqVolumeFlow   = 852.7622199182364 = m3/hr
H                  = -144341.35254999987 = kJ/kmol
Energy             = -322042757.30034775 = W
MolecularWeight    = 61.3740277217236 = 
ZFactor            = 0.07688076995822887 = 
ETHANE             = 6.449484333259747e-15 = 
PROPANE            = 0.0001 = 
ISOBUTANE          = 0.5367827196894632 = 
N-BUTANE           = 0.2311840232494151 = 
ISOPENTANE         = 0.15432251664200788 = 
N-PENTANE          = 0.0776107399453406 = 

>> 
>> 
>> 
>> v1 = Valve.Valve()
>> bottoms_col1.Out -> v1.In
>> v1.Out.P = 739.67
>> 
>> v1.Out
Port: /v1.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.4125536177738436 = 
T                  = 67.44660520748664 = C
P                  = 739.67 * kPa
MoleFlow           = 8032.028977140501 = kgmole/h
MassFlow           = 492957.96910470683 = kg/h
VolumeFlow         = 11204.680891566411 = m3/hr
StdLiqVolumeFlow   = 852.7622199182364 = m3/hr
H                  = -144341.35254999987 = kJ/kmol
Energy             = -322042757.30034775 = W
MolecularWeight    = 61.37402772172359 = 
ZFactor            = 0.3643659038965487 = 
ETHANE             = 6.449484333259747e-15 = 
PROPANE            = 0.0001 = 
ISOBUTANE          = 0.5367827196894632 = 
N-BUTANE           = 0.2311840232494151 = 
ISOPENTANE         = 0.15432251664200788 = 
N-PENTANE          = 0.0776107399453406 = 

>> 
>> 
>> feed_col2 = Stream.Stream_Material()
>> v1.Out -> feed_col2.In
>> 
>> 
>> col2 = Tower.Tower()
>> col2.Stage_0 + 29  # twenty two stages`
>> 
>> cd col2.Stage_16
/col2.Stage_16
>> 
>> f = Tower.Feed()
>> /feed_col2.Out -> f.Port
>> 
>> cd ../Stage_0
/col2.Stage_0
>> l = Tower.LiquidDraw()
>> l.Port.P = 719.0
>> l.Port.MoleFlow = 6000
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> reflux = Tower.StageSpecification('Reflux')
>> reflux.Value = 15.0
>> 
>> cd ../Stage_30
/col2.Stage_30
>> l = Tower.LiquidDraw()
>> l.Port.P = 750.0
>> 
>> reb = Tower.EnergyFeed(1)
>> 
>> cd ..
/col2
>> 
>> # DampingFactor = 0.9
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /col2
Calculating disturbance 10 of 31 in jacobian of /col2
Calculating disturbance 20 of 31 in jacobian of /col2
Calculating disturbance 30 of 31 in jacobian of /col2
/col2 Inner Error 0.003321
/col2 Inner Error 0.000998
/col2 Inner Error 0.000056
/col2 Inner Error 0.000002
Inner loop converged
/col2 Iteration 1 Outer Error 0.012861
/col2 Inner Error 0.001573
/col2 Inner Error 0.000130
/col2 Inner Error 0.000015
/col2 Inner Error 0.000001
Inner loop converged
/col2 Iteration 2 Outer Error 0.000434
/col2 Inner Error 0.001488
/col2 Inner Error 0.000315
/col2 Inner Error 0.000009
Inner loop converged
/col2 Iteration 3 Outer Error 0.000003
/col2 Inner Error 0.000074
/col2 Inner Error 0.000006
Inner loop converged
>> 
>> /overhead_col2 = Stream.Stream_Material()
>> /overhead_col2.In -> Stage_0.l.Port
>> 
>> /bottoms_col2 = Stream.Stream_Material()
>> /bottoms_col2.In -> Stage_30.l.Port
>> 
>> cd /
/
>> 
>> overhead_col2.Out
Port: /overhead_col2.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 55.40080612045364 = C
P                  = 719.0 = kPa
MoleFlow           = 6000.0 = kgmole/h
MassFlow           = 348721.9484094395 = kg/h
VolumeFlow         = 649.3793849109757 = m3/hr
StdLiqVolumeFlow   = 619.581628729365 = m3/hr
H                  = -148246.83896154878 = kJ/kmol
Energy             = -247078064.93591464 = W
MolecularWeight    = 58.12032424690415 = 
ZFactor            = 0.02848652115205863 = 
ETHANE             = 6.449529047089916e-15 = 
PROPANE            = 0.00013386804115990387 = 
ISOBUTANE          = 0.7183067966114286 = 
N-BUTANE           = 0.28155916098590483 = 
ISOPENTANE         = 1.6759766783036707e-07 = 
N-PENTANE          = 6.763832205097108e-09 = 

>> bottoms_col2.Out
Port: /bottoms_col2.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.471036238653234e-06 = 
T                  = 100.54774597352156 = C
P                  = 750.0 = kPa
MoleFlow           = 2032.0689775350536 = kgmole/h
MassFlow           = 144238.34553118786 = kg/h
VolumeFlow         = 269.011966682201 = m3/hr
StdLiqVolumeFlow   = 233.18472177380548 = m3/hr
H                  = -161110.28765266194 = kJ/kmol
Energy             = -90940893.75020085 = W
MolecularWeight    = 70.98102826524703 = 
ZFactor            = 0.03195506856563088 = 
ETHANE             = 6.4493523216727576e-15 = 
PROPANE            = 2.908179763256273e-12 = 
ISOBUTANE          = 0.0008081979113681718 = 
N-BUTANE           = 0.08244457894154705 = 
ISOPENTANE         = 0.6099802389608567 = 
N-PENTANE          = 0.30676698418331344 = 

>> 
>> col2.TryToSolve = 0
>> col2.Stage_0.reflux =
>> col2.Stage_0.l.Port.MoleFlow =
>> 
>> col2.Stage_0.l.Port.Fraction.ISOPENTANE = 0.00001
>> col2.Stage_30.l.Port.Fraction.N-BUTANE = 0.001
>> 
>> col2.DampingFactor = 1.0
>> col2.TryToSolve = 1
/col2 Inner Error 0.081365
Step size too small - Exiting inner loop
/col2 Iteration 1 Outer Error 0.000001
Calculating Jacobian for /col2
Calculating disturbance 10 of 31 in jacobian of /col2
Calculating disturbance 20 of 31 in jacobian of /col2
Calculating disturbance 30 of 31 in jacobian of /col2
/col2 Inner Error 0.081161
/col2 Inner Error 0.081159
Inner loop is not changing significantly - exiting
/col2 Iteration 2 Outer Error 0.000014
Calculating Jacobian for /col2
Calculating disturbance 10 of 31 in jacobian of /col2
Calculating disturbance 20 of 31 in jacobian of /col2
Calculating disturbance 30 of 31 in jacobian of /col2
/col2 Inner Error 0.083075
/col2 Inner Error 0.083059
/col2 Inner Error 0.082961
/col2 Inner Error 0.082919
/col2 Inner Error 0.082768
/col2 Inner Error 0.082669
/col2 Inner Error 0.082389
/col2 Inner Error 0.081943
/col2 Inner Error 0.080666
/col2 Inner Error 0.071390
/col2 Inner Error 0.034514
/col2 Inner Error 0.024491
/col2 Inner Error 0.015393
/col2 Inner Error 0.008767
/col2 Inner Error 0.006716
/col2 Inner Error 0.003413
/col2 Inner Error 0.001910
/col2 Inner Error 0.001532
/col2 Inner Error 0.001297
Step size too small - Exiting inner loop
/col2 Iteration 3 Outer Error 0.054222
Calculating Jacobian for /col2
Calculating disturbance 10 of 31 in jacobian of /col2
Calculating disturbance 20 of 31 in jacobian of /col2
Calculating disturbance 30 of 31 in jacobian of /col2
/col2 Inner Error 0.059941
/col2 Inner Error 0.014057
/col2 Inner Error 0.004249
/col2 Inner Error 0.002320
/col2 Inner Error 0.000832
/col2 Inner Error 0.000309
/col2 Inner Error 0.000151
/col2 Inner Error 0.000055
/col2 Inner Error 0.000016
/col2 Inner Error 0.000005
Inner loop converged
/col2 Iteration 4 Outer Error 0.009038
/col2 Inner Error 0.011302
/col2 Inner Error 0.008989
/col2 Inner Error 0.002934
/col2 Inner Error 0.000694
/col2 Inner Error 0.000361
/col2 Inner Error 0.000343
/col2 Inner Error 0.000056
/col2 Inner Error 0.000055
Inner loop is not changing significantly - exiting
/col2 Iteration 5 Outer Error 0.000057
Calculating Jacobian for /col2
Calculating disturbance 10 of 31 in jacobian of /col2
Calculating disturbance 20 of 31 in jacobian of /col2
Calculating disturbance 30 of 31 in jacobian of /col2
/col2 Inner Error 0.000028
/col2 Inner Error 0.000001
Inner loop converged
>> 
>> overhead_col2.Out
Port: /overhead_col2.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 3.7867903685188414e-08 = 
T                  = 55.63250581505406 = C
P                  = 719.0 = kPa
MoleFlow           = 6167.255839385535 = kgmole/h
MassFlow           = 358444.0859351507 = kg/h
VolumeFlow         = 667.362842874208 = m3/hr
StdLiqVolumeFlow   = 636.3944385778366 = m3/hr
H                  = -148066.73787221438 = kJ/kmol
Energy             = -253657070.48921707 = W
MolecularWeight    = 58.120515067016385 = 
ZFactor            = 0.02846138708439425 = 
ETHANE             = 6.447547364254244e-15 = 
PROPANE            = 0.0001302366754373864 = 
ISOBUTANE          = 0.6990755660875208 = 
N-BUTANE           = 0.30078408519168337 = 
ISOPENTANE         = 1e-05 = 
N-PENTANE          = 1.1238397190324099e-07 = 

>> bottoms_col2.Out
Port: /bottoms_col2.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 3.217383496892932e-05 = 
T                  = 104.6589645996687 = C
P                  = 750.0 = kPa
MoleFlow           = 1864.7731377549908 = kgmole/h
MassFlow           = 134513.8775343793 = kg/h
VolumeFlow         = 252.13036738471087 = m3/hr
StdLiqVolumeFlow   = 216.36777508228383 = m3/hr
H                  = -162575.13739226124 = kJ/kmol
Energy             = -84212708.07664324 = W
MolecularWeight    = 72.13417804610259 = 
ZFactor            = 0.03228151972180952 = 
ETHANE             = 6.455890371458353e-15 = 
PROPANE            = 5.369022545686835e-13 = 
ISOBUTANE          = 4.102048132317635e-05 = 
N-BUTANE           = 0.001 = 
ISOPENTANE         = 0.6646713375028912 = 
N-PENTANE          = 0.33428785880270795 = 

>> 
>> 
>> feed_col3 = Stream.Stream_Material()
>> overhead_col2.Out -> feed_col3.In
>> 
>> 
>> 
>> col3 = Tower.Tower()
>> col3.Stage_0 + 79  # twenty two stages`
>> 
>> cd col3.Stage_40
/col3.Stage_40
>> 
>> f = Tower.Feed()
>> /feed_col3.Out -> f.Port
>> 
>> cd ../Stage_0
/col3.Stage_0
>> l = Tower.LiquidDraw()
>> l.Port.P = 668.0
>> l.Port.MoleFlow = 3000
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> reflux = Tower.StageSpecification('Reflux')
>> reflux.Value = 2.0
>> 
>> cd ../Stage_80
/col3.Stage_80
>> l = Tower.LiquidDraw()
>> l.Port.P = 719.0
>> 
>> reb = Tower.EnergyFeed(1)
>> 
>> cd ..
/col3
>> 
>> # DampingFactor = 0.9
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /col3
Calculating disturbance 10 of 81 in jacobian of /col3
Calculating disturbance 20 of 81 in jacobian of /col3
Calculating disturbance 30 of 81 in jacobian of /col3
Calculating disturbance 40 of 81 in jacobian of /col3
Calculating disturbance 50 of 81 in jacobian of /col3
Calculating disturbance 60 of 81 in jacobian of /col3
Calculating disturbance 70 of 81 in jacobian of /col3
Calculating disturbance 80 of 81 in jacobian of /col3
/col3 Inner Error 0.000049
/col3 Inner Error 0.000001
Inner loop converged
/col3 Iteration 1 Outer Error 0.000835
/col3 Inner Error 0.000030
/col3 Inner Error 0.000000
Inner loop converged
/col3 Iteration 2 Outer Error 0.000002
/col3 Inner Error 0.000001
Inner loop converged
>> 
>> /overhead_col3 = Stream.Stream_Material()
>> /overhead_col3.In -> Stage_0.l.Port
>> 
>> /bottoms_col3 = Stream.Stream_Material()
>> /bottoms_col3.In -> Stage_80.l.Port
>> 
>> cd /
/
>> 
>> overhead_col3.Out
Port: /overhead_col3.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 2.302953491218109e-06 = 
T                  = 50.84237465190307 = C
P                  = 668.0 = kPa
MoleFlow           = 3000.0 = kgmole/h
MassFlow           = 174355.33475944586 = kg/h
VolumeFlow         = 321.7731282526702 = m3/hr
StdLiqVolumeFlow   = 311.30743768083846 = m3/hr
H                  = -149937.64572666408 = kJ/kmol
Energy             = -124948038.1055534 = W
MolecularWeight    = 58.11844476428224 = 
ZFactor            = 0.026597205354275812 = 
ETHANE             = 6.447533779247137e-15 = 
PROPANE            = 0.0002677228288102926 = 
ISOBUTANE          = 0.8494850794358006 = 
N-BUTANE           = 0.15024718664988598 = 
ISOPENTANE         = 2.941828148891162e-09 = 
N-PENTANE          = 8.143668422040969e-09 = 

>> bottoms_col3.Out
Port: /bottoms_col3.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 57.38886955613367 = C
P                  = 719.0 = kPa
MoleFlow           = 3167.2514758463813 = kgmole/h
MassFlow           = 184088.49757359488 = kg/h
VolumeFlow         = 342.3289302657021 = m3/hr
StdLiqVolumeFlow   = 325.0865480962671 = m3/hr
H                  = -146726.36822332928 = kJ/kmol
Energy             = -129088696.19469978 = W
MolecularWeight    = 58.122475437024235 = 
ZFactor            = 0.028276992955176102 = 
ETHANE             = 6.447560227652135e-15 = 
PROPANE            = 1.0495589544010542e-08 = 
ISOBUTANE          = 0.5566084455372086 = 
N-BUTANE           = 0.44337186368509063 = 
ISOPENTANE         = 1.946916225185751e-05 = 
N-PENTANE          = 2.111198529819546e-07 = 

>> 
>> 
>> col3.TryToSolve = 0
>> col3.Stage_0.reflux =
>> col3.Stage_0.l.Port.MoleFlow =
>> 
>> col3.Stage_0.l.Port.Fraction.N-BUTANE = 0.0001
>> col3.Stage_80.l.Port.Fraction.ISOBUTANE = 0.0001
>> 
>> # col3.DampingFactor = 1.0
>> col3.TryToSolve = 1
/col3 Inner Error 0.610706
Step size too small - Exiting inner loop
/col3 Iteration 1 Outer Error 0.000027
Calculating Jacobian for /col3
Calculating disturbance 10 of 81 in jacobian of /col3
Calculating disturbance 20 of 81 in jacobian of /col3
Calculating disturbance 30 of 81 in jacobian of /col3
Calculating disturbance 40 of 81 in jacobian of /col3
Calculating disturbance 50 of 81 in jacobian of /col3
Calculating disturbance 60 of 81 in jacobian of /col3
Calculating disturbance 70 of 81 in jacobian of /col3
Calculating disturbance 80 of 81 in jacobian of /col3
/col3 Inner Error 0.256497
/col3 Inner Error 0.024573
/col3 Inner Error 0.023205
/col3 Inner Error 0.018859
/col3 Inner Error 0.017936
/col3 Inner Error 0.013934
/col3 Inner Error 0.008323
/col3 Inner Error 0.007695
/col3 Inner Error 0.006873
/col3 Inner Error 0.004876
/col3 Inner Error 0.004001
/col3 Inner Error 0.003691
/col3 Inner Error 0.003553
Step size too small - Exiting inner loop
/col3 Iteration 2 Outer Error 0.005743
Calculating Jacobian for /col3
Calculating disturbance 10 of 81 in jacobian of /col3
Calculating disturbance 20 of 81 in jacobian of /col3
Calculating disturbance 30 of 81 in jacobian of /col3
Calculating disturbance 40 of 81 in jacobian of /col3
Calculating disturbance 50 of 81 in jacobian of /col3
Calculating disturbance 60 of 81 in jacobian of /col3
Calculating disturbance 70 of 81 in jacobian of /col3
Calculating disturbance 80 of 81 in jacobian of /col3
/col3 Inner Error 0.023859
/col3 Inner Error 0.009887
/col3 Inner Error 0.004985
Step size too small - Exiting inner loop
/col3 Iteration 3 Outer Error 0.001557
Calculating Jacobian for /col3
Calculating disturbance 10 of 81 in jacobian of /col3
Calculating disturbance 20 of 81 in jacobian of /col3
Calculating disturbance 30 of 81 in jacobian of /col3
Calculating disturbance 40 of 81 in jacobian of /col3
Calculating disturbance 50 of 81 in jacobian of /col3
Calculating disturbance 60 of 81 in jacobian of /col3
Calculating disturbance 70 of 81 in jacobian of /col3
Calculating disturbance 80 of 81 in jacobian of /col3
/col3 Inner Error 0.002936
/col3 Inner Error 0.001447
/col3 Inner Error 0.001123
/col3 Inner Error 0.000828
/col3 Inner Error 0.000744
/col3 Inner Error 0.000701
/col3 Inner Error 0.000642
/col3 Inner Error 0.000625
/col3 Inner Error 0.000616
Inner loop is not changing significantly - exiting
/col3 Iteration 4 Outer Error 0.000037
Calculating Jacobian for /col3
Calculating disturbance 10 of 81 in jacobian of /col3
Calculating disturbance 20 of 81 in jacobian of /col3
Calculating disturbance 30 of 81 in jacobian of /col3
Calculating disturbance 40 of 81 in jacobian of /col3
Calculating disturbance 50 of 81 in jacobian of /col3
Calculating disturbance 60 of 81 in jacobian of /col3
Calculating disturbance 70 of 81 in jacobian of /col3
Calculating disturbance 80 of 81 in jacobian of /col3
/col3 Inner Error 0.000031
/col3 Inner Error 0.000002
Inner loop converged
>> 
>> overhead_col3.Out
Port: /overhead_col3.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 49.14466481018377 = C
P                  = 668.0 = kPa
MoleFlow           = 4312.426772340946 = kgmole/h
MassFlow           = 250636.46627127094 = kg/h
VolumeFlow         = 463.3125270177794 = m3/hr
StdLiqVolumeFlow   = 450.01950006512084 = m3/hr
H                  = -151328.770345629 = kJ/kmol
Energy             = -181276177.9622014 = W
MolecularWeight    = 58.119587222774875 = 
ZFactor            = 0.02678190531402408 = 
ETHANE             = 6.450194430893563e-15 = 
PROPANE            = 0.00018624220275365846 = 
ISOBUTANE          = 0.9997137527998402 = 
N-BUTANE           = 0.0001 = 
ISOPENTANE         = 7.502726873863227e-09 = 
N-PENTANE          = 1.4878243154715776e-28 = 

>> bottoms_col3.Out
Port: /bottoms_col3.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 64.85416899056253 = C
P                  = 719.0 = kPa
MoleFlow           = 1854.829067044374 = kgmole/h
MassFlow           = 107807.61966390985 = kg/h
VolumeFlow         = 200.00602752386996 = m3/hr
StdLiqVolumeFlow   = 186.3749383524993 = m3/hr
H                  = -141370.23460370488 = kJ/kmol
Energy             = -72838227.87717615 = W
MolecularWeight    = 58.122671020946626 = 
ZFactor            = 0.02758746780353033 = 
ETHANE             = 6.44139299956955e-15 = 
PROPANE            = 2.5358415827790305e-08 = 
ISOBUTANE          = 0.0001 = 
N-BUTANE           = 0.9998663522382364 = 
ISOPENTANE         = 3.323228242856745e-05 = 
N-PENTANE          = 3.7367362796582515e-07 = 

