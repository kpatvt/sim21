>> # Depropanizer test (from old Hysim manual)
>> units SI
>> thermo = Sim21Thermo.Peng-Robinson
pkgName: Peng-Robinson
The usage of thermo = Sim21Thermo.Peng-Robinson is obsolete and will be deprecated. Use $thermoname = opTypeDesc instead
>> thermo + propane isobutane n-butane isopentane n-pentane
propane isobutane n-butane isopentane n-pentane 
>> thermo + n-hexane n-heptane n-octane
n-hexane n-heptane n-octane 
>> thermo + n-nonane n-decane
n-nonane n-decane 
>> thermo + water
water 
>> 
>> stab = Tower.Tower()
>> stab.Stage_0 + 10  # twelve stages
>> stab.LiquidPhases = 2
>> 
>> cd stab.Stage_0
/stab.Stage_0
>> 
>> l = Tower.LiquidDraw()
>> l.Port.P = 1000
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> # WORKS OUT WITHOUT WATER DRAW
>> # USING WATER DRAW REQUIRES 2 LIQ PHASE CALCS
>> # NOT YET IMPLEMENTED
>> # wd = Tower.WaterDraw()
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = 25
>> 
>> reflux = Tower.StageSpecification('Reflux')
>> reflux.Value = 2
>> 
>> cd ../Stage_5
/stab.Stage_5
>> f = Tower.Feed()
>> f.Port.T = 50
>> f.Port.P = 2000
>> f.Port.MoleFlow = 1000
>> f.Port.Fraction = .1702 .1473 .1132 .1166 .1066 .0963 .0829 .0694 .0558 .0417 .005
>> f.Port
Port: /stab.Feed_5_f + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 50.0 * C
P                  = 2000.0 * kPa
MoleFlow           = 1000.0000000000001 * kgmole/h
MassFlow           = 76081.85478407961 = kg/h
VolumeFlow         = 123.92046840713627 = m3/hr
StdLiqVolumeFlow   = 119.2897641791045 = m3/hr
H                  = -178150.30632810874 = kJ/kmol
Energy             = -49486196.20225243 = W
MolecularWeight    = 76.0818547840796 = 
ZFactor            = 0.09224327138062205 = 
PROPANE            = 0.16935323383084577 * 
ISOBUTANE          = 0.14656716417910448 * 
N-BUTANE           = 0.11263681592039802 * 
ISOPENTANE         = 0.11601990049751244 * 
N-PENTANE          = 0.10606965174129354 * 
N-HEXANE           = 0.09582089552238807 * 
N-HEPTANE          = 0.08248756218905473 * 
N-OCTANE           = 0.06905472636815921 * 
N-NONANE           = 0.0555223880597015 * 
N-DECANE           = 0.04149253731343284 * 
WATER              = 0.0049751243781094535 * 

>> 
>> cd ../Stage_11
/stab.Stage_11
>> l = Tower.LiquidDraw()
>> l.Port.P = 1100
>> l.Port.Fraction.n-BUTANE = .02
>> 
>> reb = Tower.EnergyFeed(1)
>> estT = Tower.Estimate('T')
>> estT.Value = 100
>> 
>> cd ..
/stab
>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.l.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_11.l.Port
>> 
>> 
>> /stab.MaxOuterLoops = 40
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /stab
Calculating disturbance 10 of 12 in jacobian of /stab
/stab Inner Error 0.031124
/stab Inner Error 0.005345
/stab Inner Error 0.000697
/stab Inner Error 0.000215
/stab Inner Error 0.000053
/stab Inner Error 0.000010
Inner loop converged
/stab Iteration 1 Outer Error 0.117164
/stab Inner Error 0.020762
/stab Inner Error 0.016058
/stab Inner Error 0.003315
/stab Inner Error 0.002841
/stab Inner Error 0.000400
/stab Inner Error 0.000158
/stab Inner Error 0.000017
/stab Inner Error 0.000001
Inner loop converged
/stab Iteration 2 Outer Error 0.001986
/stab Inner Error 0.003224
/stab Inner Error 0.000602
/stab Inner Error 0.000029
/stab Inner Error 0.000001
Inner loop converged
/stab Iteration 3 Outer Error 0.000161
/stab Inner Error 0.000202
/stab Inner Error 0.000024
/stab Inner Error 0.000001
Inner loop converged
/stab Iteration 4 Outer Error 0.000016
/stab Inner Error 0.000024
/stab Inner Error 0.000001
Inner loop converged
>> 
>> /overhead.Out
Port: /overhead.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 50.86972470224612 = C
P                  = 1000.0 = kPa
MoleFlow           = 433.15766141269137 = kgmole/h
MassFlow           = 22856.54252420704 = kg/h
VolumeFlow         = 43.748429610540796 = m3/hr
StdLiqVolumeFlow   = 39.64854795916265 = m3/hr
H                  = -138149.79251281117 = kJ/kmol
Energy             = -16622400.291527174 = W
MolecularWeight    = 52.76725892243604 = 
ZFactor            = 0.03748960237231203 = 
PROPANE            = 0.39074105289854005 = 
ISOBUTANE          = 0.32966231626333514 = 
N-BUTANE           = 0.23386484444523256 = 
ISOPENTANE         = 0.02722671753951823 = 
N-PENTANE          = 0.00885071165558522 = 
N-HEXANE           = 0.00010051490905340667 = 
N-HEPTANE          = 1.5729723969634672e-06 = 
N-OCTANE           = 2.8880200043101178e-08 = 
N-NONANE           = 2.702412435063872e-10 = 
N-DECANE           = 5.710413283415806e-10 = 
WATER              = 0.00955223959485577 = 

>> /bottoms.Out
Port: /bottoms.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 2.765581628699105e-06 = 
T                  = 165.71791999071496 = C
P                  = 1100.0 = kPa
MoleFlow           = 566.8423385873085 = kgmole/h
MassFlow           = 53225.29866661753 = kg/h
VolumeFlow         = 105.03759328384298 = m3/hr
StdLiqVolumeFlow   = 79.64120101412604 = m3/hr
H                  = -180044.25755835287 = kJ/kmol
Energy             = -28349085.556553453 = W
MolecularWeight    = 93.89788843096349 = 
ZFactor            = 0.055860799209623 = 
PROPANE            = 0.00017774455527196965 = 
ISOBUTANE          = 0.006653360121239884 = 
N-BUTANE           = 0.02 = 
ISOPENTANE         = 0.18387200832581646 = 
N-PENTANE          = 0.18036037751434664 = 
N-HEXANE           = 0.1689664836224882 = 
N-HEPTANE          = 0.1455199713020459 = 
N-OCTANE           = 0.12182349333780944 = 
N-NONANE           = 0.09795031909757837 = 
N-DECANE           = 0.07319943173174066 = 
WATER              = 0.0014774806977813917 = 

>> 
>> copy /stab /overhead /bottoms
Copied /stab /overhead /bottoms to the clipboard
>> paste /
Pasting /stab /overhead /bottoms
Pasted /stab /overhead /bottoms as /stabClone /overheadClone /bottomsClone
/stabClone Inner Error 0.000000
Inner loop converged
/stabClone Iteration 1 Outer Error 0.000001
/stabClone Inner Error 0.000001
Inner loop converged
>> /overheadClone.Out
Port: /overheadClone.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 50.86952336730445 = C
P                  = 1000.0 = kPa
MoleFlow           = 433.15496155519514 = kgmole/h
MassFlow           = 22856.363228221864 = kg/h
VolumeFlow         = 43.748106782970154 = m3/hr
StdLiqVolumeFlow   = 39.64825306699853 = m3/hr
H                  = -138149.64874082946 = kJ/kmol
Energy             = -16622279.385888249 = W
MolecularWeight    = 52.767173890773606 = 
ZFactor            = 0.0374895826957169 = 
PROPANE            = 0.3907434808969015 = 
ISOBUTANE          = 0.32966390894348274 = 
N-BUTANE           = 0.23386469571645155 = 
ISOPENTANE         = 0.027224010611738424 = 
N-PENTANE          = 0.008849632849269025 = 
N-HEXANE           = 0.00010049587393590489 = 
N-HEPTANE          = 1.5725618473007862e-06 = 
N-OCTANE           = 2.8870645056655367e-08 = 
N-NONANE           = 2.7012959997166824e-10 = 
N-DECANE           = 5.708362419784202e-10 = 
WATER              = 0.00955217283476262 = 

>> /bottomsClone.Out
Port: /bottomsClone.Out + sim21.old.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 165.71748742685872 = C
P                  = 1100.0 = kPa
MoleFlow           = 566.8450384448046 = kgmole/h
MassFlow           = 53225.50092438942 = kg/h
VolumeFlow         = 105.03404501262483 = m3/hr
StdLiqVolumeFlow   = 79.64152159202101 = m3/hr
H                  = -180044.32198604563 = kJ/kmol
Energy             = -28349230.727208003 = W
MolecularWeight    = 93.89779801269644 = 
ZFactor            = 0.05585870118077584 = 
PROPANE            = 0.00017774943445158066 = 
ISOBUTANE          = 0.0066536815509627995 = 
N-BUTANE           = 0.02 = 
ISOPENTANE         = 0.1838733307317383 = 
N-PENTANE          = 0.18036038499196597 = 
N-HEXANE           = 0.16896569386714846 = 
N-HEPTANE          = 0.14551927851816285 = 
N-OCTANE           = 0.12182291310541331 = 
N-NONANE           = 0.09794985256468805 = 
N-DECANE           = 0.07319908308628965 = 
WATER              = 0.0014775701722593985 = 

>> 
